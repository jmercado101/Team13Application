<head>
    <title>Books Database</title>
<!--<link rel="stylesheet" type="text/css" href="styles.css"> -->
    <script src="/socket.io/socket.io.js"></script>
	<script src="jquery-3.3.1.min.js"></script>
	<script src="https://kit.fontawesome.com/480ae34729.js" crossorigin="anonymous"></script>
</head>
<body>
	
	<!-- <h1>HOME</h1><br/> -->

	<div class="topnav">
			
		<img href="#image"></img>
		<a class="active" href="#home">Home</a>
		<a href="#books">Books</a>
		<a href="#best_sellers">Best Sellers</a>
		<a href="#new_releases">New Releases</a>
		<a href="#login" id="login">Log In / Register</a>
		<div class="cart-btn">
			<span class="nav-icon">
				<i class="fas fa-cart-plus" onclick="showCart()"></i>
			</span>
			<div class="cart-items">0</div>
		</div>

	</div>

	<ul>
		<br><br><br>
        <li><a href='./pages/bookDetails.html'>TEST PAGE</a> <span> All authors</span> </li>
		<li><a href='./pages/authors.html'>Authors:</a> <span> All authors</span> </li>
		<li><a href='./pages/books.html'>Books:</a> <span> All books</span> </li>
		<li><a href='./pages/copies.html'>Copies:</a> <span> All copies</span> </li>
		<li><a href='./pages/publishers.html'>Publishers:</a> <span> All publishers</span></li>
		<li><a href='./pages/search.html'>Search:</a> <span> Find information about a book</span></li>
		<li><a href='./pages/delete.html'>Delete:</a> <span> delete a table value</span> </li>
		<li><a href='./pages/add.html'>Add:</a> <span> add a table value </span> </li>
		<li><a href='./pages/modify.html'>Modify:</a> <span> modify a table value</span> </li>
		
	</ul>

	<div class="cart-overlay" id="cart-overlay">
			<div class="cart" id="cart">
				<span class="close-cart">
					<i class="fas fa-window-close" onclick="hideCart()"></i>
				</span>
				<h2>your cart</h2>
				<div class="cart-content" id="cart-content">
					<!-- cart item-->
					<div class="cart-item">
						
					</div>
					<!-- end of cart item-->
				</div>
				<div class="cart-footer">
					<h3>your total: $<span class="cart-total">0</span></h3>
					<button class="clear-cart banner-btn">clear cart</button>
				</div>
			</div>
		</div>


    <script>
		var socket = io();//auto-discovery
		$(document).ready(function(){ 
			///Event Listeners
			//logs current users
			socket.on("server found" ,function(message){
				console.log('The server told me ' + message);
			});
		});
		//Beginning of Nawaz's Cart BS
		function showCart(){
			document.getElementById("cart-overlay").classList.add("transparentBcg");
			document.getElementById("cart").classList.add("showCart");
		}

		function hideCart(){
			document.getElementById("cart-overlay").classList.remove("transparentBcg");
			document.getElementById("cart").classList.remove("showCart");
		}

		var current_table_data = [];
        var socket = io();//open socket
        $(document).ready(function () {
			socket.emit('getCart', userID); //don't know where userID is coming from, yet.            
			console.log('Sent request to server');
            ///Event Listeners
            //logs current users
            socket.on("cartDetails", function (data) {
                bookData = data;
                //console.log(data);
                addCartItem(bookData);
            });
		});
		

        //function adds item to visual cart
        function addCartItem(bookData){
            const div = document.createElement('div');
            div.classList.add('cart-item');
            div.innerHTML = `
            <img src=${bookData.coverURL} alt="product"/>
            <div>
                <h4>${bookData.title}</h4>
                <h5>$${bookData.price}</h5>
                <span class="remove-item" data-id=${bookData.ISBN}>remove</span>
            </div>
            <div>
                <i class="fas fa-chevron-up" data-id=${bookData.ISBN}></i>
                <p class="item-amount">${bookData.quantity}</p>
                <i class="fas fa-chevron-down" data-id=${bookData.ISBN}></i>
            </div>
            `
            document.getElementById("cart-content").appendChild(div);
        }
		
		</script>
	
	<style>

		.topnav {
            background-color: #DDDDDD;
            overflow: hidden;
            position: fixed;
            top: 0;
            width: 100%;
        }
		.topnav a {
	        float: left;
			color: #001f3f;
                text-align: center;
                padding: 14px 16px;
                text-decoration: none;
                font-size: 17px;
            }

        .topnav a:hover {
                    background-color: #ddd;
                    color: orange;
                }

        .topnav a.active {
                    color: orange;
                }

        #login {
            float: right !important;
            margin-right: 50px;
		}


		:root {
 			 --primaryColor: #33AEFF;
  			--mainWhite: #fff;
  			--mainBlack: #222;
			--mainGrey: #000000;
			--mainSpacing: 0.1rem;
			--mainTransition: all 0.3s linear;
		}
		.cart-overlay {
			position: fixed;
			top: 0;
			right: 0;
			width: 100%;
			height: 100%;
			transition: var(--mainTransition);
			background: hsl(204, 100%, 60% , .5);
			z-index: 2;
			visibility: hidden;
			}

		.cart {
			position: fixed;
			top: 0;
			right: 0;
			width: 100%;
			height: 100%;
			overflow: scroll;
			z-index: 3;
			background: #E5E7E9;
			padding: 1.5rem;
			transition: var(--mainTransition);
			transform: translateX(100%);
			}
		.showCart {
			transform: translateX(0);
			}
		.transparentBcg {
			visibility: visible;
			}

		@media screen and (min-width: 768px) {
			.cart {
				width: 30vw;
				min-width: 450px;
			}
		}

		.nav-icon {
			font-size: 1.5rem;
		}
		.cart-btn {
			position: relative;
			cursor: pointer;
		}

		.close-cart {
			font-size: 1.7rem;
			cursor: pointer;
			}
		.cart h2 {
			text-transform: capitalize;
			text-align: center;
			letter-spacing: var(--mainSpacing);
			margin-bottom: 2rem;
			}
		.cart-item {
				display: grid;
				align-items: center;
				grid-template-columns: auto 1fr auto;
				grid-column-gap: 1.5rem;
				margin: 1.5rem 0;
		}
		.cart-item img {
				width: 75px;
				height: 75px;
		}
		.cart-item h4 {
				font-size: 0.85rem;
				text-transform: capitalize;
				letter-spacing: var(--mainSpacing);
		}
		.cart-item h5 {
				margin: 0.5rem 0;
				letter-spacing: var(--mainSpacing);
		}
		.item-amount {
				text-align: center;
		}
		.remove-item {
				color: grey;
				cursor: pointer;
		}
		.fa-chevron-up,
		.fa-chevron-down {
				color: var(--primaryColor);
				cursor: pointer;
		}
		.cart-footer {
   			 margin-top: 2rem;
  			letter-spacing: var(--mainSpacing);
  			text-align: center;
		}
		.cart-footer h3 {
  			text-transform: capitalize;
  			margin-bottom: 1rem;
		}
	</style>
</body>
